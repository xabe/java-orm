<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.xabe.mybatis.mapper.BlogMapper">


  <update id="dropTable" parameterType="string">
    DROP TABLE IF EXISTS t_${name}
  </update>

  <update id="createTableIfNotExist" parameterType="java.lang.String">
    CREATE TABLE IF NOT EXISTS t_${name}
    (
      id   int(11) NOT NULL AUTO_INCREMENT,
      name varchar(255)   DEFAULT NULL,
      date timestamp NULL DEFAULT NULL,
      PRIMARY KEY (id)
    )ENGINE=InnoDB DEFAULT CHARSET=utf8 COMMENT='this table is generated by java code.'
  </update>

  <insert id="insertBlog" parameterType="blog" useGeneratedKeys="true" keyProperty="blog.id" keyColumn="id">
    insert into t_blog(name, date)
    values (#{blog.name}, #{blog.date})
  </insert>

  <resultMap id="BaseResultMap" type="com.xabe.mybatis.mapper.Blog">
    <id column="id" property="id" jdbcType="INTEGER" />
    <result column="name" property="name" jdbcType="VARCHAR" />
    <result column="date" property="date" jdbcType="TIMESTAMP" />
  </resultMap>

  <select id="findBlogs" resultMap="BaseResultMap">
    SELECT id, name, date
    FROM t_blog
  </select>

  <select id="getBlog" parameterType="int" resultMap="BaseResultMap">
    SELECT id, name, date
    FROM t_blog
    WHERE id = #{id}
  </select>

  <delete id="deleteBlog" parameterType="int">
    delete
    from t_blog
    where id = #{id}
  </delete>

  <update id="updateBlog" parameterType="blog">
    update t_blog
    set name = #{blog.name},
        date = #{blog.date}
    where id = #{blog.id}
  </update>


</mapper>
